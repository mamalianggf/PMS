<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pms.mapper.OpinionMapper">


    <insert id="insertOpinion" parameterType="Opinion">
        insert into opinion (intro, details, creator_id, create_time)
        values (#{intro}, #{details}, #{creatorId}, #{createTime})
    </insert>

    <select id="listOpinion" parameterType="Opinion" resultType="Opinion">
        select id, intro, details, creator_id, create_time, status from opinion
        where 1=1
        <if test="id != null and id != ''">
            id = #{id}
        </if>
        <if test="intro != null and intro != ''">
            intro = #{intro}
        </if>
        <if test="details != null and details != ''">
            details = #{details}
        </if>
        <if test="creatorId != null and creatorId != ''">
            creator_id = #{creatorId}
        </if>
        <if test="createTime != null and createTime != ''">
            create_time = #{createTime}
        </if>
        <if test="status != null and status != ''">
            status = #{status}
        </if>
        order by create_time desc
    </select>

</mapper>